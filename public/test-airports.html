<!DOCTYPE html>
<html>
<head>
    <title>Flight Search Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2>Testing Airport Search API</h2>
        <div class="mb-3">
            <label for="searchInput" class="form-label">Search for Airport/City</label>
            <input type="text" class="form-control" id="searchInput" placeholder="Type to search...">
            <div id="results" class="mt-3"></div>
        </div>
    </div>

    <script>
        const searchInput = document.getElementById('searchInput');
        const resultsDiv = document.getElementById('results');

        let timeout;
        searchInput.addEventListener('input', function() {
            clearTimeout(timeout);
            const query = this.value;
            
            if (query.length < 2) {
                resultsDiv.innerHTML = '';
                return;
            }

            timeout = setTimeout(async () => {
                try {
                    const response = await fetch(`/api/airports?search=${encodeURIComponent(query)}`);
                    const data = await response.json();
                    
                    resultsDiv.innerHTML = `
                        <h5>Results for "${query}":</h5>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                } catch (error) {
                    resultsDiv.innerHTML = `<div class="alert alert-danger">Error: ${error.message}</div>`;
                }
            }, 300);
        });
    </script>
</body>
</html>
